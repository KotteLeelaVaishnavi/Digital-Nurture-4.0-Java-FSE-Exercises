<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vizag Community Events Portal</title>
    
    <!-- External Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    
<!-- Bootstrap 5 CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
        /* Universal selector to reset margin/padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body background and font setup */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            background-attachment: fixed;
            color: #333;
            line-height: 1.6;
        }

        /* Navigation styles */
        nav {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style-type: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        nav ul li {
            margin: 0 2rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        /* Link pseudo-classes */
        nav ul li a:link { color: white; }
        nav ul li a:visited { color: #e0e0e0; }
        nav ul li a:hover { 
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        nav ul li a:active { 
            background: rgba(255,255,255,0.3);
            transform: translateY(0);
        }

        /* Main header styling */
        #mainHeader {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 4rem 2rem;
            margin-bottom: 2rem;
        }

        #mainHeader h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Welcome banner with ID styling */
        #welcomeBanner {
            background: linear-gradient(45deg, #ffc0cb 20%, #004d99 80%);
            color: white;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 800px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        /* Highlight class for visual emphasis */
        .highlight {
            background: linear-gradient(45deg, #ffd89b 10%, #19547b 90%);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 25px;
            font-weight: 600;
            display: inline-block;
            margin: 0.2rem;
        }

        /* Event card styling */
        .eventCard {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .eventCard:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        /* Table styling */
        table {
            width: 100%;
            max-width: 900px;
            margin: 2rem auto;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        th {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        /* Zebra striping for table rows */
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .event-image {
            width: 200px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .event-image:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        /* Form styling */
        form {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            max-width: 600px;
            margin: 2rem auto;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        form input, form select, form textarea {
            width: 100%;
            padding: 0.8rem;
            margin: 0.5rem 0;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        form input:focus, form select:focus, form textarea:focus {
            outline: 3px solid #667eea;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        /* CTA button styling */
        .cta-button {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* Multi-column layout for news */
        .news-section {
            column-count: 2;
            column-gap: 30px;
            column-rule: 1px solid #ccc;
            background: white;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 800px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        /* Video styling */
        video {
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        /* Output styling */
        output {
            display: block;
            margin: 1rem 0;
            padding: 1rem;
            background: #d4edda;
            color: #155724;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        /* Character counter */
        .char-counter {
            font-size: 0.9rem;
            color: #666;
            text-align: right;
        }

        /* Event filter buttons */
        .filter-buttons {
            text-align: center;
            margin: 2rem 0;
        }

        .filter-btn {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 0.5rem 1rem;
            margin: 0.2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
        }

        /* Loading spinner */
        .loading {
            text-align: center;
            padding: 2rem;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive design with media queries */
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }

            nav ul li {
                margin: 0.2rem 0;
            }

            #mainHeader h1 {
                font-size: 2rem;
            }

            .news-section {
                column-count: 1;
            }

            table, th, td {
                font-size: 0.8rem;
            }
            
            .event-image {
                width: 150px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    
<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top shadow">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#">Vizag Events</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navItems">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-center" id="navItems">
      <ul class="navbar-nav mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#events">Events</a></li>
        <li class="nav-item"><a class="nav-link" href="#gallery">Gallery</a></li>
        <li class="nav-item"><a class="nav-link" href="#register">Register</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        <li class="nav-item"><a class="nav-link" href="help.html" target="_blank">Help</a></li>
      </ul>
    </div>
  </div>
</nav>


    <!-- Main Header -->
    <header id="mainHeader">
        <h1>Vizag Community Events Portal</h1>
        <p>Discover, Connect, and Participate in Visakhapatnam's Vibrant Community Events</p>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Welcome Banner -->
        <div id="welcomeBanner">
            <h2>Welcome to Vizag Events!</h2>
            <p>Join our vibrant community and never miss an event in the beautiful city of Visakhapatnam.</p>
            <span style="color: red; font-weight: bold;">Special Offer: 20% off on all workshop registrations this month!</span>
        </div>

        <!-- Home Section -->
        <section id="home">
            <div class="eventCard">
                <h2>About Vizag Community Portal</h2>
                <p>Welcome to the official community event portal for Visakhapatnam! Our platform helps residents discover local events, workshops, cultural programs, and community services. From beach festivals at RK Beach to tech workshops in IT parks, we bring you the best of Vizag's happening scene.</p>
                <div class="highlight">Join 5000+ Active Members</div>
                <div class="highlight">500+ Events Organized</div>
                <div class="highlight">50+ Community Partners</div>
            </div>
        </section>

        <!-- News Section with Multi-column Layout -->
        <section class="news-section">
            <h3>Community Bulletin</h3>
            <p>The Vizag Municipal Corporation has announced new initiatives for community development. The upcoming beach cleaning drive at RK Beach will be held on the first Sunday of every month. Volunteers are welcome to join and contribute to keeping our beautiful coastline clean.</p>
            <p>Local IT companies have partnered with educational institutions to provide free coding workshops for students. These sessions will be conducted at various venues across the city including AU College of Engineering and GITAM University.</p>
            <p><br>The annual Vizag Book Festival is scheduled for next month at the Kali Temple grounds. This year's theme focuses on regional literature and will feature renowned Telugu authors. Entry is free for all residents.</p>
        </section>

        <!-- Events Section -->
        <section id="events">
            <div class="eventCard">
                <h2>Upcoming Events in Vizag</h2>
                
                <!-- Event Filter Buttons -->
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterEvents('all')">All Events</button>
                    <button class="filter-btn" onclick="filterEvents('cultural')">Cultural</button>
                    <button class="filter-btn" onclick="filterEvents('workshop')">Workshops</button>
                    <button class="filter-btn" onclick="filterEvents('sports')">Sports</button>
                    <button class="filter-btn" onclick="filterEvents('food')">Food</button>
                </div>

                <!-- Events Container -->
                <div id="eventsContainer">
                    <div class="loading" id="loadingSpinner">
                        <div class="spinner"></div>
                        <p>Loading events...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section with Table -->
        <section id="gallery">
            <div class="eventCard">
                <h2>Past Events Gallery</h2>
                <table>
                    <caption><strong>Memorable Moments from Recent Vizag Events</strong></caption>
                    <tr>
                        <th>Event</th>
                        <th>Image</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Vizag Beach Festival</td>
                        <td><img src="https://edmidentity.com/wp-content/uploads/2018/10/Luminosity-Beach-Festival-2018.jpg" alt="Beach Festival at RK Beach" title="Annual Beach Festival 2024" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>Our annual beach festival attracted over 10,000 visitors with cultural performances, food stalls, and beach sports. The event showcased local talent and promoted Vizag's coastal heritage.</td>
                    </tr>
                    <tr>
                        <td>Tech Workshop Series</td>
                        <td><img src="https://th.bing.com/th/id/R.0a1c25a1ea905b43c9afb380e2342af4?rik=qtEEnpsZNzBi1A&riu=http%3a%2f%2fkalyanvarma.net%2fart%2fpws3.jpg&ehk=gLbb17b5ToHq7Ndx3gVZNyFig%2bc7SvvlDFIWhgsR5G4%3d&risl=&pid=ImgRaw&r=0" alt="Technology Workshop" title="Python Programming Workshop" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>A series of 5 workshops covering Python, Web Development, and AI basics. Over 200 students participated across different venues in Vizag, with 95% completion rate.</td>
                    </tr>
                    <tr>
                        <td>Kali Temple Cultural Night</td>
                        <td><img src="https://th.bing.com/th/id/OIP.85aNQq8BZ09e4csgNpWWWQAAAA?cb=iwc2&w=300&h=200&rs=1&pid=ImgDetMain" alt="Cultural Performance" title="Traditional Dance Performance" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>Traditional dance and music performances at the historic Kali Temple premises. Featured classical Kuchipudi dancers and local folk artists, celebrating Andhra Pradesh's rich culture.</td>
                    </tr>
                    <tr>
                        <td>Food Festival</td>
                        <td><img src="https://www.decodedmagazine.com/wp-content/uploads/2021/07/street-feast-2.jpg" alt="Local Food Festival" title="Vizag Food Festival" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>A celebration of Vizag's diverse cuisine featuring local specialities like Bamboo Chicken, Andhra Fish Curry, and traditional sweets. 50+ food vendors participated.</td>
                    </tr>
                    <tr>
                        <td>Marathon at Beach Road</td>
                        <td><img src="https://th.bing.com/th/id/OIP.K0Rkzw2xNfdjDFu4ID5AkAAAAA?cb=iwc2&rs=1&pid=ImgDetMain" alt="Marathon Event" title="Vizag Beach Marathon" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>Annual 10K marathon along the scenic Beach Road route. 1,500 participants from across Andhra Pradesh joined, promoting fitness and showcasing Vizag's beautiful coastline.</td>
                    </tr>
                    <tr>
                        <td>Book Reading Session</td>
                        <td><img src="https://www.thebges.edu.in/wp-content/uploads/2024/04/Book-Reading-Session-with-Author-Mrs.-Mansi-Chaturvedi-3.jpg" alt="Book Reading Event" title="Community Book Club Meeting" class="event-image" ondblclick="enlargeImage(this)"></td>
                        <td>Monthly book club meeting at Central Library discussing Telugu literature and contemporary fiction. Featured author interactions and literary discussions with 80+ book enthusiasts.</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- Registration Form -->
        <section id="register">
            <div class="eventCard">
                <h2>Event Registration Form</h2>
                <form id="registrationForm" onsubmit="return handleFormSubmit(event)">
                    <label for="fullName">Full Name:</label>
                    <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required autofocus>
                    
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
                    
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" placeholder="+91 98765 43210" required onblur="validatePhone(this)">
                    
                    <label for="eventDate">Preferred Event Date:</label>
                    <input type="date" id="eventDate" name="eventDate" required>
                    
                    <label for="eventType">Event Category:</label>
                    <select id="eventType" name="eventType" onchange="displayEventFee(this)" required>
                        <option value="">Select Event Type</option>
                        <option value="cultural">Cultural Event - ₹200</option>
                        <option value="workshop">Technical Workshop - ₹500</option>
                        <option value="sports">Sports Event - ₹100</option>
                        <option value="food">Food Festival - ₹300</option>
                    </select>
                    
                    <div id="eventFee"></div>
                    
                    <label for="feedback">Additional Message/Feedback:</label>
                    <textarea id="feedback" name="feedback" rows="4" placeholder="Tell us about your interests or any special requirements..." onkeyup="countCharacters(this)"></textarea>
                    <div class="char-counter" id="charCount">0/500 characters</div>
                    
                    <button type="submit" class="cta-button" onclick="confirmSubmission()">Register Now</button>
                    
                    <output id="confirmationMessage"></output>
                </form>
            </div>
        </section>

        <!-- Video Section -->
        <section id="video-section">
            <div class="eventCard" style="text-align: center;">
                <h2>Vizag Events Promo Video</h2>
                <video controls oncanplay="videoReadyMessage()">
                    <source src="communityeventspromovideo.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div id="videoStatus"></div>
            </div>
        </section>

        <!-- Geolocation Section -->
        <section id="location">
            <div class="eventCard">
                <h2>Find Nearby Events</h2>
                <p>Discover events happening near your location in Vizag!</p>
                <button class="cta-button" onclick="findNearbyEvents()">Find Nearby Events</button>
                <div id="locationInfo"></div>
            </div>
        </section>

        <!-- User Preferences -->
        <section id="preferences">
            <div class="eventCard">
                <h2>Save Your Preferences</h2>
                <p>We'll remember your preferred event types for future visits.</p>
                <select id="preferredCategory" onchange="savePreference(this.value)">
                    <option value="">Select Preferred Category</option>
                    <option value="cultural">Cultural Events</option>
                    <option value="workshop">Workshops</option>
                    <option value="sports">Sports Events</option>
                    <option value="food">Food Festivals</option>
                </select>
                <button class="cta-button" onclick="clearPreferences()" style="margin-left: 1rem;">Clear Preferences</button>
                <div id="preferenceStatus"></div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact">
            <div class="eventCard">
                <h2>Contact Us</h2>
                <p><strong>Vizag Community Event Portal</strong></p>
                <p>Address: Municipal Corporation Building, Jagadamba Center, Visakhapatnam - 530020</p>
                <p>Phone: +91 891-2564-789</p>
                <p>Email: events@vizagcommunity.gov.in</p>
                <p>Office Hours: Monday to Friday, 9:00 AM - 6:00 PM</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); color: white; text-align: center; padding: 2rem; margin-top: 3rem;">
        <p>&copy; 2024 Vizag Community Event Portal. All rights reserved.</p>
        <p>Proudly serving the beautiful city of Visakhapatnam</p>
    </footer>

    <script>
        // Sample events data for Vizag
        const vizagEvents = [
            {
                id: 1,
                name: "Vizag Beach Cleanup Drive",
                category: "cultural",
                date: "2025-06-15",
                location: "RK Beach",
                fee: 0,
                seats: 100,
                description: "Join us for a community beach cleanup at the famous RK Beach. Let's keep our coastline beautiful!"
            },
            {
                id: 2,
                name: "Python Programming Workshop",
                category: "workshop",
                date: "2025-06-20",
                location: "GITAM University",
                fee: 500,
                seats: 50,
                description: "Learn Python programming from industry experts. Perfect for beginners and intermediate learners."
            },
            {
                id: 3,
                name: "Kuchipudi Dance Performance",
                category: "cultural",
                date: "2025-06-25",
                location: "Kali Temple Grounds",
                fee: 200,
                seats: 200,
                description: "Experience the beauty of classical Kuchipudi dance by renowned artists from Andhra Pradesh."
            },
            {
                id: 4,
                name: "Vizag Food Festival",
                category: "food",
                date: "2025-07-01",
                location: "VUDA Park",
                fee: 300,
                seats: 500,
                description: "Taste the authentic flavors of Vizag! From bamboo chicken to traditional Andhra sweets."
            },
            {
                id: 5,
                name: "Beach Volleyball Tournament",
                category: "sports",
                date: "2025-07-10",
                location: "Rushikonda Beach",
                fee: 100,
                seats: 64,
                description: "Annual beach volleyball championship. Teams of 4 players each. Prizes worth ₹50,000!"
            },
            {
                id: 6,
                name: "Web Development Bootcamp",
                category: "workshop",
                date: "2025-07-15",
                location: "AU College of Engineering",
                fee: 800,
                seats: 30,
                description: "3-day intensive bootcamp covering HTML, CSS, JavaScript, and React. Build real projects!"
            }
        ];

        // Global variables
        let currentEvents = [...vizagEvents];
        let activeFilter = 'all';

        // DOM loaded event
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Welcome to the Community Portal');
            loadUserPreferences();
            setTimeout(() => {
                loadEvents();
            }, 1500); // Simulate loading delay
        });

        // Before unload warning
        window.addEventListener('beforeunload', function(e) {
            const form = document.getElementById('registrationForm');
            const hasData = form.fullName.value || form.email.value || form.phone.value;
            if (hasData) {
                e.preventDefault();
                e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                return 'You have unsaved changes. Are you sure you want to leave?';
            }
        });

        // Load events function
        async function loadEvents() {
            const container = document.getElementById('eventsContainer');
            const spinner = document.getElementById('loadingSpinner');
            
            // Simulate API call
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            spinner.style.display = 'none';
            displayEvents(currentEvents);
        }

        // Display events function
        function displayEvents(events) {
            const container = document.getElementById('eventsContainer');
            
            if (events.length === 0) {
                container.innerHTML = '<p>No events found for the selected category.</p>';
                return;
            }

            const eventsHTML = events.map(event => `
                <div class="eventCard" data-category="${event.category}">
                    <h3>${event.name}</h3>
                    <p><strong>Date:</strong> ${new Date(event.date).toLocaleDateString('en-IN')}</p>
                    <p><strong>Location:</strong> ${event.location}</p>
                    <p><strong>Fee:</strong> ${event.fee === 0 ? 'Free' : '₹' + event.fee}</p>
                    <p><strong>Available Seats:</strong> ${event.seats}</p>
                    <p>${event.description}</p>
                    <button class="cta-button" onclick="registerForEvent(${event.id})">Register Now</button>
                </div>
            `).join('');
            
            container.innerHTML = eventsHTML;
        }

        // Filter events function
        function filterEvents(category) {
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            activeFilter = category;
            
            if (category === 'all') {
                currentEvents = [...vizagEvents];
            } else {
                currentEvents = vizagEvents.filter(event => event.category === category);
            }
            
            displayEvents(currentEvents);
        }

        // Event registration function
        function registerForEvent(eventId) {
            const event = vizagEvents.find(e => e.id === eventId);
            if (event && event.seats > 0) {
                event.seats -= 1;
                alert(`Successfully registered for ${event.name}! Remaining seats: ${event.seats}`);
                displayEvents(currentEvents);
            } else {
                alert('Sorry, this event is fully booked!');
            }
        }

        // Form submission handler
        function handleFormSubmit(event) {
            event.preventDefault();
            
            try {
                const formData = new FormData(event.target);
                const registrationData = {
                    name: formData.get('fullName'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    date: formData.get('eventDate'),
                    eventType: formData.get('eventType'),
                    feedback: formData.get('feedback')
                };

                // Simulate API call
                setTimeout(() => {
                    const output = document.getElementById('confirmationMessage');
                    output.innerHTML = `
                        <strong>Registration Successful!</strong><br>
                        Thank you ${registrationData.name}! We've received your registration for ${registrationData.eventType}. 
                        Confirmation details have been sent to ${registrationData.email}.
                    `;
                    event.target.reset();
                }, 1000);

            } catch (error) {
                console.error('Registration failed:', error);
                alert('Registration failed. Please try again.');
            }
            
            return false;
        }

        // Phone validation with blur event
        function validatePhone(input) {
            const phonePattern = /^[\+]?[91]{2}?[-\s]?[6-9]\d{4}\s?\d{5}$/;
            if (!phonePattern.test(input.value)) {
                input.style.borderColor = 'red';
                alert('Please enter a valid Indian phone number (e.g., +91 98765 43210)');
            } else {
                input.style.borderColor = '#28a745';
            }
        }

        // Display event fee on selection change
        function displayEventFee(select) {
            const feeDiv = document.getElementById('eventFee');
            const selectedOption = select.options[select.selectedIndex];
            if (selectedOption.value) {
                const feeText = selectedOption.text.split(' - ')[1];
                feeDiv.innerHTML = `<p style="color: #28a745; font-weight: bold;">Registration Fee: ${feeText}</p>`;
            } else {
                feeDiv.innerHTML = '';
            }
        }

        // Character counter for textarea
        function countCharacters(textarea) {
            const count = textarea.value.length;
            const counter = document.getElementById('charCount');
            counter.textContent = `${count}/500 characters`;
            
            if (count > 500) {
                counter.style.color = 'red';
                textarea.value = textarea.value.substring(0, 500);
            } else {
                counter.style.color = '#666';
            }
        }

        // Confirmation on form submission
        function confirmSubmission() {
            return confirm('Are you sure you want to submit this registration?');
        }

        // Image enlargement on double-click
        function enlargeImage(img) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); display: flex; justify-content: center; 
                align-items: center; z-index: 10000; cursor: pointer;
            `;
            
            const enlargedImg = document.createElement('img');
            enlargedImg.src = img.src;
            enlargedImg.style.cssText = 'max-width: 90%; max-height: 90%; border-radius: 15px;';
            
            modal.appendChild(enlargedImg);
            document.body.appendChild(modal);
            
            modal.onclick = () => document.body.removeChild(modal);
        }

        // Video ready message
        function videoReadyMessage() {
            const statusDiv = document.getElementById('videoStatus');
            statusDiv.innerHTML = '<p style="color: #28a745; font-weight: bold;">Video ready to play!</p>';
        }

        // Geolocation functionality
        function findNearbyEvents() {
            const infoDiv = document.getElementById('locationInfo');
            infoDiv.innerHTML = '<p>Getting your location...</p>';

            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            };

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    infoDiv.innerHTML = `
                        <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                            <h4>Your Location Found!</h4>
                            <p><strong>Latitude:</strong> ${lat.toFixed(6)}</p>
                            <p><strong>Longitude:</strong> ${lon.toFixed(6)}</p>
                            <p><strong>Nearby Events:</strong></p>
                            <ul style="text-align: left;">
                                <li>Beach Volleyball at Rushikonda Beach (2.3 km away)</li>
                                <li>Tech Workshop at GITAM University (5.1 km away)</li>
                                <li>Food Festival at VUDA Park (3.7 km away)</li>
                            </ul>
                        </div>
                    `;
                },
                function(error) {
                    let errorMessage = '';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage = 'Location access denied by user.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage = 'Location information is unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage = 'Location request timed out.';
                            break;
                        default:
                            errorMessage = 'An unknown error occurred.';
                            break;
                    }
                    infoDiv.innerHTML = `<p style="color: #dc3545;">${errorMessage}</p>`;
                },
                options
            );
        }

        // Save user preferences (using variables instead of localStorage)
        let userPreferences = {};

        function savePreference(category) {
            if (category) {
                userPreferences.preferredCategory = category;
                document.getElementById('preferenceStatus').innerHTML = 
                    `<p style="color: #28a745;">Preference saved: ${category}</p>`;
            }
        }

        function loadUserPreferences() {
            if (userPreferences.preferredCategory) {
                document.getElementById('preferredCategory').value = userPreferences.preferredCategory;
                document.getElementById('preferenceStatus').innerHTML = 
                    `<p style="color: #007bff;">Loaded preference: ${userPreferences.preferredCategory}</p>`;
            }
        }

        function clearPreferences() {
            userPreferences = {};
            document.getElementById('preferredCategory').value = '';
            document.getElementById('preferenceStatus').innerHTML = 
                '<p style="color: #dc3545;">All preferences cleared!</p>';
        }

        // Async function to simulate fetching events from API
        async function fetchEventsFromAPI() {
            try {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // In a real application, this would be:
                // const response = await fetch('/api/events');
                // const events = await response.json();
                
                return vizagEvents;
            } catch (error) {
                console.error('Failed to fetch events:', error);
                throw error;
            }
        }

        // Modern JavaScript features demonstration
        const EventManager = {
            // ES6 arrow functions and default parameters
            createEvent: (name = 'Untitled Event', category = 'general', fee = 0) => {
                return {
                    id: Date.now(),
                    name,
                    category,
                    fee,
                    seats: 50,
                    registered: []
                };
            },

            // Destructuring and spread operator
            filterEventsByLocation: (events, ...locations) => {
                return events.filter(event => {
                    const { location } = event;
                    return locations.some(loc => location.toLowerCase().includes(loc.toLowerCase()));
                });
            },

            // Template literals and object methods
            formatEventDisplay: (event) => {
                const { name, date, location, fee } = event;
                return `
                    Event: ${name}
                    Date: ${new Date(date).toLocaleDateString('en-IN')}
                    Location: ${location}
                    Fee: ${fee === 0 ? 'Free' : `₹${fee}`}
                `;
            }
        };

        // Higher-order function example
        function createEventFilter(filterType) {
            return function(events) {
                switch(filterType) {
                    case 'free':
                        return events.filter(event => event.fee === 0);
                    case 'paid':
                        return events.filter(event => event.fee > 0);
                    case 'available':
                        return events.filter(event => event.seats > 0);
                    default:
                        return events;
                }
            };
        }

        // Closure example for tracking registrations
        function createRegistrationTracker() {
            let totalRegistrations = 0;
            
            return {
                register: () => {
                    totalRegistrations++;
                    console.log(`Total registrations: ${totalRegistrations}`);
                    return totalRegistrations;
                },
                getTotal: () => totalRegistrations,
                reset: () => {
                    totalRegistrations = 0;
                    console.log('Registration count reset');
                }
            };
        }

        const registrationTracker = createRegistrationTracker();

        // Array methods demonstration
        function analyzeEvents() {
            // Using map to transform data
            const eventNames = vizagEvents.map(event => event.name.toUpperCase());
            
            // Using filter to find specific events
            const freeEvents = vizagEvents.filter(event => event.fee === 0);
            
            // Using reduce to calculate total revenue
            const totalRevenue = vizagEvents.reduce((sum, event) => {
                return sum + (event.fee * (50 - event.seats)); // assuming initial seats were 50
            }, 0);
            
            console.log('Event Analysis:', {
                eventNames,
                freeEventsCount: freeEvents.length,
                totalRevenue: `₹${totalRevenue}`
            });
        }

        // Call analysis on page load
        setTimeout(analyzeEvents, 3000);

        // Event object constructor and prototype
        function Event(name, category, date, location, fee) {
            this.name = name;
            this.category = category;
            this.date = date;
            this.location = location;
            this.fee = fee;
            this.seats = 50;
            this.registered = [];
        }

        Event.prototype.checkAvailability = function() {
            return this.seats > 0;
        };

        Event.prototype.register = function(userName) {
            if (this.checkAvailability()) {
                this.registered.push(userName);
                this.seats--;
                return `${userName} registered for ${this.name}`;
            }
            return 'Event is full';
        };

        // Keyboard event handling for search
        document.addEventListener('keydown', function(e) {
            // Quick search with Ctrl+F
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                const searchTerm = prompt('Search events:');
                if (searchTerm) {
                    const filtered = vizagEvents.filter(event => 
                        event.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        event.description.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                    displayEvents(filtered);
                }
            }
        });

        // jQuery-like functionality (simplified)
        function $(selector) {
            const elements = document.querySelectorAll(selector);
            return {
                elements: elements,
                click: function(callback) {
                    elements.forEach(el => el.addEventListener('click', callback));
                    return this;
                },
                fadeIn: function() {
                    elements.forEach(el => {
                        el.style.opacity = '0';
                        el.style.display = 'block';
                        let opacity = 0;
                        const timer = setInterval(() => {
                            if (opacity >= 1) {
                                clearInterval(timer);
                            }
                            el.style.opacity = opacity;
                            opacity += 0.1;
                        }, 50);
                    });
                    return this;
                },
                fadeOut: function() {
                    elements.forEach(el => {
                        let opacity = 1;
                        const timer = setInterval(() => {
                            if (opacity <= 0) {
                                clearInterval(timer);
                                el.style.display = 'none';
                            }
                            el.style.opacity = opacity;
                            opacity -= 0.1;
                        }, 50);
                    });
                    return this;
                }
            };
        }

        // Example usage of custom jQuery-like functions
        setTimeout(() => {
            $('.eventCard').click(function() {
                console.log('Event card clicked!');
            });
        }, 2000);

        // Form validation with modern JavaScript
        const formValidator = {
            validateEmail: (email) => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            },
            
            validatePhone: (phone) => {
                const phoneRegex = /^[\+]?[91]{2}?[-\s]?[6-9]\d{4}\s?\d{5}$/;
                return phoneRegex.test(phone);
            },
            
            validateForm: (formData) => {
                const errors = [];
                
                if (!formData.fullName || formData.fullName.length < 2) {
                    errors.push('Name must be at least 2 characters long');
                }
                
                if (!formValidator.validateEmail(formData.email)) {
                    errors.push('Please enter a valid email address');
                }
                
                if (!formValidator.validatePhone(formData.phone)) {
                    errors.push('Please enter a valid Indian phone number');
                }
                
                return {
                    isValid: errors.length === 0,
                    errors: errors
                };
            }
        };

        // AJAX simulation with Fetch API
        async function submitRegistration(registrationData) {
            try {
                // Show loading state
                const submitBtn = document.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;

                // Simulate API call delay
                await new Promise(resolve => setTimeout(resolve, 2000));

                // In real application, this would be:
                // const response = await fetch('/api/register', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(registrationData)
                // });

                // Simulate success response
                const mockResponse = {
                    success: true,
                    message: 'Registration successful!',
                    registrationId: 'REG' + Date.now()
                };

                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;

                return mockResponse;
            } catch (error) {
                console.error('Registration failed:', error);
                throw error;
            }
        }

        console.log('Vizag Community Portal JavaScript loaded successfully!');
        console.log('Features available: Event filtering, Registration, Geolocation, Form validation');
    </script>

<!-- Bootstrap 5 JS Bundle CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>